(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{8683:function(e,t){var n;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0!==(n=(function(){return a}).apply(t,[]))&&(e.exports=n)}()},8560:function(e,t,n){Promise.resolve().then(n.bind(n,5590))},3377:function(e,t,n){"use strict";n.d(t,{L:function(){return o},c:function(){return s}});var r=n(5474),a=n(666);function o(){return localStorage.getItem(a.px)}async function i(){return await (0,r.gw)(2e3),{code:"code",message:"Mock",result:{nickName:"Mock",token:"Mock"}}}async function s(e,t){if(a.M7)return await i();let n=await fetch("".concat(a.FH,"/member/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:e,password:t})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));return await n.json()}},5590:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(9268),a=n(5474),o=n(666),i=n(3377);async function s(){return await (0,a.gw)(2e3),{code:"Mock",message:"Mock",result:[{id:"1",userId:"userId1",lastLoginTime:"1687622400",nickName:"nickName",updateTime:"1687622400",createTime:"1687622400",operator:"operator"},{id:"2",userId:"userId2",lastLoginTime:"1687622400",nickName:"nickName",updateTime:"1687622400",createTime:"1687622400",operator:"operator"}]}}async function c(){if(o.M7)return await s();let e=await fetch("".concat(o.FH,"/management/members"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,i.L)())}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}async function l(){return await (0,a.gw)(2e3),{code:"mock",message:"mock",result:{id:"1",userId:"userId1",lastLoginTime:"1687622400",nickName:"nickName",updateTime:"1687622400",createTime:"1687622400",operator:"operator"}}}async function u(e){if(o.M7)return await l();let t=await fetch("".concat(o.FH,"/management/member/").concat(e),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,i.L)())}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}async function d(){return await (0,a.gw)(2e3),{code:"mock",message:"mock"}}async function m(e){if(o.M7)return await d();let t=await fetch("".concat(o.FH,"/management/member/").concat(e),{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,i.L)())}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}var p=n(6831),f=n(9748),h=n(1263),y=n(7007),_=n(8302),g=n(1904),b=n(9153),k=n(6006),x=n(7638),v=n.n(x);let w=(0,k.memo)(()=>{let[e,t]=(0,k.useState)(""),n=(0,k.useMemo)(()=>[{dataIndex:"id",title:"ID"},{dataIndex:"userId",title:"帳號"},{dataIndex:"nickName",title:"暱稱"},{dataIndex:"createTime",title:"註冊時間",render:e=>(0,a.rn)(e)},{dataIndex:"lastLoginTime",title:"最後登入時間",render:e=>(0,a.rn)(e)},{dataIndex:"operator",title:"操作者"},{dataIndex:"updateTime",title:"操作時間",render:e=>(0,a.rn)(e)},{title:"操作",render:(e,t)=>{let{id:n}=t;return(0,r.jsx)(p.Z,{onClick:()=>{x(!0),j(n)},looks:b.L.danger,children:"刪除"})}}],[]),o=(0,k.useCallback)(async()=>{try{if(e){let t=await u(e);return[t.result]}{let e=await c();return e.result}}catch(e){return[]}},[e]),{loading:i,run:s,data:l}=(0,g.Q)(o,{manual:!1}),[d,x]=(0,k.useState)(!1),[w,j]=(0,k.useState)(""),[N,S]=(0,k.useState)(!1),C=(0,k.useCallback)(async()=>{S(!0);try{await m(w)}catch(e){}S(!1),x(!1),await s()},[w,s]),T=(0,k.useCallback)(async()=>{j(""),x(!1)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{onSubmit:s,children:(0,r.jsx)(h.Z,{placeholder:"輸入帳號或ID",value:e,onChange:t})}),(0,r.jsx)(_.Z,{className:v().table,columns:n,dataSource:l,loading:i}),(0,r.jsx)(y.Z,{open:d,maskClosable:!1,onClose:()=>{x(!1)},children:(0,r.jsxs)("div",{className:v().deleteModalContent,children:[(0,r.jsx)("p",{children:"是否確認刪除？"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{looks:b.L.danger,loading:N,onClick:C,children:"確定"}),(0,r.jsx)(p.Z,{disabled:N,onClick:T,children:"取消"})]})]})})]})});w.displayName="MemberPage";var j=w},6831:function(e,t,n){"use strict";var r=n(9268),a=n(6006),o=n(3368),i=n(1576),s=n.n(i),c=n(8683),l=n.n(c),u=n(9153);let d=(0,a.memo)(e=>{let{className:t,children:n,loading:a,disabled:i,htmlType:c,onClick:d,looks:m,icon:p}=e;return(0,r.jsxs)("button",{className:"close"===p?l()("bg-close bg-4 h-8 w-8 bg-center bg-no-repeat opacity-50",t):l()(s().button,{[s().primary]:m===u.L.primary,[s().danger]:m===u.L.danger,[s().dark]:m===u.L.dark},t),disabled:a||i,onClick:d,type:c,children:[a&&(0,r.jsx)(o.Z,{size:o.v.small})," ",n]})});d.displayName="Button",t.Z=d},9748:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var r,a=n(9268),o=n(6006),i=n(9924),s=n.n(i),c=n(8683),l=n.n(c),u=n(5474),d=n(2624);(r||(r={})).horizontal="horizontal";let m=(0,o.memo)(e=>{let{layout:t,onSubmit:n,children:i}=e,[c,m]=(0,o.useState)(!1);return(0,a.jsx)("form",{className:l()({[s().horizontal]:t===r.horizontal}),onSubmit:async e=>{if(e.preventDefault(),!c&&n){m(!0);try{n instanceof u.sG?await n():n()}catch(e){e instanceof Error?(0,u.cM)(e.message,d.L.console):(0,u.cM)(e,d.L.console)}finally{m(!1)}}},children:i})});m.displayName="Form",t.Z=m},1263:function(e,t,n){"use strict";var r=n(9268),a=n(6006),o=n(3115),i=n.n(o);let s=(0,a.memo)((0,a.forwardRef)((e,t)=>{let{type:n,value:o,onChange:s,onKeyDown:c,disabled:l,placeholder:u}=e,[d,m]=(0,a.useState)(o||"");return(0,r.jsx)("input",{className:i().input,type:n,value:d,onChange:e=>{let t=e.target.value;m(t),null==s||s(t)},onKeyDown:c,disabled:l,placeholder:u,ref:t})}));s.displayName="Input",t.Z=s},7007:function(e,t,n){"use strict";var r=n(9268),a=n(6006),o=n(8431),i=n(3194),s=n(4209),c=n.n(s),l=n(6831);function u(e){let{title:t,children:n,width:a,isCloseButtonShow:o,maskClosable:i,onClose:s}=e;return(0,r.jsx)("div",{className:c().backgroundMask,onClick:i?s:void 0,children:(0,r.jsxs)("div",{className:"my-12 divide-y divide-solid rounded bg-white",style:{width:a},onClick:e=>{e.stopPropagation()},children:[t&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 text-xl font-medium",children:[t,o&&(0,r.jsx)(l.Z,{className:"p-2",icon:"close",onClick:s})]}),n&&(0,r.jsx)("div",{className:"p-4",children:n})]})})}let d=(0,a.memo)(e=>{let{title:t,children:n,open:a=!1,width:i,isCloseButtonShow:s,maskClosable:c=!0,onClose:l}=e;return a&&(0,o.createPortal)((0,r.jsx)(u,{title:t,width:i,isCloseButtonShow:s,maskClosable:c,onClose:l,children:n}),document.body)});d.displayName="Modal";let m=(0,a.memo)(e=>{let{content:t,onOk:n,okButtonProps:o,onCancel:i,cancelButtonProps:s}=e,[d,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),h=(0,a.useCallback)(async()=>{m(!0),await (null==n?void 0:n()),m(!1)},[n]),y=(0,a.useCallback)(async()=>{f(!0),await (null==i?void 0:i()),f(!1)},[i]);return(0,r.jsxs)(u,{children:[t,(0,r.jsxs)("div",{className:c().buttonGroup,children:[(0,r.jsx)(l.Z,{...o,loading:d,disabled:p,onClick:h,children:"確定"}),(0,r.jsx)(l.Z,{...s,loading:p,disabled:d,onClick:y,children:"取消"})]})]})});m.displayName="ConfirmModal";let p="confirmModal";d.confirm=e=>{let{content:t,onOk:n,okButtonProps:a,onCancel:o,cancelButtonProps:s}=e,c=document.getElementById(p);c||((c=document.createElement("div")).id=p),document.body.appendChild(c);let l=(0,i.createRoot)(c);l.render((0,r.jsx)(m,{content:t,onOk:async()=>{try{await (null==n?void 0:n()),l.unmount()}catch(e){}},okButtonProps:a,onCancel:async()=>{await (null==o?void 0:o()),l.unmount()},cancelButtonProps:s}))},t.Z=d},3368:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r,a,o=n(9268),i=n(6006),s=n(722),c=n.n(s),l=n(8683),u=n.n(l);(r=a||(a={})).small="small",r.medium="medium";let d=(0,i.memo)(e=>{let{spinning:t=!0,size:n=a.medium,expand:r=!1,children:i}=e;return t?(0,o.jsxs)("div",{className:u()(c().wrapper,{[c().expand]:r},{[c().small]:n===a.small,[c().medium]:n===a.medium}),children:[i,(0,o.jsx)("div",{className:u()(c().overlay,{[c().block]:!i}),children:(0,o.jsx)("div",{className:c().spinner})})]}):i});d.displayName="Spin",t.Z=d},8302:function(e,t,n){"use strict";var r=n(9268),a=n(6006),o=n(6462),i=n(3368),s=n(6279),c=n.n(s),l=n(8683),u=n.n(l);let d=(0,a.memo)(e=>{let{className:t,rowKeyName:n="id",columns:s=[],dataSource:l=[],loading:d=!1}=e,m=(0,a.useMemo)(()=>s.map(e=>[e.dataIndex||(0,o.Z)(),e]),[s]),p=(0,a.useMemo)(()=>(0,r.jsx)("tr",{children:m.map(e=>{let[t,{title:n}]=e;return(0,r.jsx)("th",{children:n},t)})}),[m]),f=(0,a.useMemo)(()=>l.map(e=>(0,r.jsx)("tr",{children:m.map(t=>{let[n,{dataIndex:a,render:o}]=t;return(0,r.jsx)("td",{children:o?o(a&&e[a],e):a&&e[a]},n)})},e[n])),[m,l,n]);return(0,r.jsx)(i.Z,{spinning:d,expand:!0,children:(0,r.jsx)("div",{className:u()(c().wrapper,t),children:(0,r.jsx)("table",{className:u()(c().table),children:(0,r.jsxs)("tbody",{children:[p,f]})})})})});d.displayName="Table",t.Z=d},1904:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});var r=n(6006);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{manual:!0},n=(0,r.useRef)(t.manual),[a,o]=(0,r.useState)({loading:!1,data:void 0}),i=(0,r.useCallback)(async function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o(e=>{let{data:t}=e;return{loading:!0,data:t}});let a=await e(...n);return o({loading:!1,data:a}),a},[e]),s=(0,r.useRef)(i),c=(0,r.useCallback)(()=>{o({loading:!1,data:void 0})},[]);return(0,r.useEffect)(()=>{n.current||s.current(...[])},[]),(0,r.useMemo)(()=>({run:i,reset:c,...a}),[i,c,a])}},2624:function(e,t,n){"use strict";var r,a;n.d(t,{L:function(){return r}}),(a=r||(r={})).none="none",a.console="console",a.message="message"},9153:function(e,t,n){"use strict";var r,a;n.d(t,{L:function(){return r}}),(a=r||(r={})).primary="primary",a.dark="dark",a.danger="danger"},666:function(e,t,n){"use strict";n.d(t,{FH:function(){return r},M7:function(){return o},px:function(){return a}});let r="https://oldcity-backend.azurewebsites.net",a="token",o=!1},5474:function(e,t,n){"use strict";n.d(t,{cM:function(){return s},gw:function(){return i},rn:function(){return c},sG:function(){return l}});var r=n(2624),a=n(5326),o=n.n(a);let i=async e=>{await new Promise(t=>setTimeout(t,e))},s=(e,t)=>{switch(t){case r.L.none:break;case r.L.console:case r.L.message:console.log(e)}};function c(e){return e?o()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}let l=(async()=>{}).constructor},7638:function(e){e.exports={table:"page_table__17I_j",deleteModalContent:"page_deleteModalContent__Ei49A"}},1576:function(e){e.exports={button:"Button_button__kd7e2",primary:"Button_primary__Nhi6i",danger:"Button_danger__214td",dark:"Button_dark__Djc0e"}},9924:function(e){e.exports={horizontal:"Form_horizontal___Dh6K"}},3115:function(e){e.exports={input:"Input_input__Wt6t_"}},4209:function(e){e.exports={backgroundMask:"Modal_backgroundMask__9WqVi",buttonGroup:"Modal_buttonGroup__PS_fc"}},722:function(e){e.exports={wrapper:"Spin_wrapper___n_bZ",expand:"Spin_expand__GPcNO",overlay:"Spin_overlay__oF_f6",block:"Spin_block__lUtsH",spinner:"Spin_spinner__jriaU",spin:"Spin_spin__j4j0X",small:"Spin_small__YbUV6",medium:"Spin_medium__fgQDT"}},6279:function(e){e.exports={wrapper:"Table_wrapper__qyAKN",table:"Table_table__D6QPq"}},3177:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(6006),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9268:function(e,t,n){"use strict";e.exports=n(3177)},6462:function(e,t,n){"use strict";let r;n.d(t,{Z:function(){return l}});let a="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var o={randomUUID:a};let i=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}let c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));var l=function(e,t,n){if(o.randomUUID&&!t&&!e)return o.randomUUID();e=e||{};let r=e.random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}(r)}}},function(e){e.O(0,[550,253,488,744],function(){return e(e.s=8560)}),_N_E=e.O()}]);